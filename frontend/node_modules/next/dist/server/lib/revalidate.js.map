{"version":3,"sources":["../../../src/server/lib/revalidate.ts"],"sourcesContent":["import { CACHE_ONE_YEAR } from '../../lib/constants'\n\n/**\n * The revalidate option used internally for pages. A value of `false` means\n * that the page should not be revalidated. A number means that the page\n * should be revalidated after the given number of seconds (this also includes\n * `1` which means to revalidate after 1 second). A value of `0` is not a valid\n * value for this option.\n */\nexport type Revalidate = number | false\nexport type SwrDelta = number\n\nexport function formatRevalidate({\n  revalidate,\n  swrDelta,\n}: {\n  revalidate: Revalidate\n  swrDelta?: SwrDelta\n}): string {\n  const swrHeader = swrDelta\n    ? `stale-while-revalidate=${swrDelta}`\n    : 'stale-while-revalidate'\n\n  if (revalidate === 0) {\n    return 'private, no-cache, no-store, max-age=0, must-revalidate'\n  } else if (typeof revalidate === 'number') {\n    return `s-maxage=${revalidate}, ${swrHeader}`\n  }\n\n  return `s-maxage=${CACHE_ONE_YEAR}, ${swrHeader}`\n}\n"],"names":["formatRevalidate","revalidate","swrDelta","swrHeader","CACHE_ONE_YEAR"],"mappings":";;;;+BAYgBA;;;eAAAA;;;2BAZe;AAYxB,SAASA,iBAAiB,EAC/BC,UAAU,EACVC,QAAQ,EAIT;IACC,MAAMC,YAAYD,WACd,CAAC,uBAAuB,EAAEA,SAAS,CAAC,GACpC;IAEJ,IAAID,eAAe,GAAG;QACpB,OAAO;IACT,OAAO,IAAI,OAAOA,eAAe,UAAU;QACzC,OAAO,CAAC,SAAS,EAAEA,WAAW,EAAE,EAAEE,UAAU,CAAC;IAC/C;IAEA,OAAO,CAAC,SAAS,EAAEC,yBAAc,CAAC,EAAE,EAAED,UAAU,CAAC;AACnD"}