{"version":3,"sources":["../../../src/server/dev/log-app-dir-error.ts"],"sourcesContent":["import isError from '../../lib/is-error'\nimport * as Log from '../../build/output/log'\n\nexport function logAppDirError(err: unknown) {\n  if (isError(err) && err?.stack) {\n    const cleanedStack = err.stack.split('\\n').map((line: string) =>\n      // Remove 'webpack-internal:' noise from the path\n      line.replace(/(webpack-internal:\\/\\/\\/|file:\\/\\/)(\\(.*?\\)\\/)?/, '')\n    )\n    const filteredStack = cleanedStack\n      // Only display stack frames from the user's code\n      .filter(\n        (line: string) =>\n          !/^\\s+at.+next[\\\\/]dist[\\\\/]compiled/.test(line) &&\n          !/^\\s+at.+node_modules[\\\\/]/.test(line) &&\n          !/^\\s+at.+node:internal[\\\\/]/.test(line)\n      )\n    if (filteredStack.length === 1) {\n      // This is an error that happened outside of user code, keep full stack\n      Log.error(`Internal error: ${cleanedStack.join('\\n')}`)\n    } else {\n      Log.error(filteredStack.join('\\n'))\n    }\n    if (typeof (err as any).digest !== 'undefined') {\n      console.error(`digest: ${JSON.stringify((err as any).digest)}`)\n    }\n\n    if (err.cause) console.error('Cause:', err.cause)\n  } else {\n    Log.error(err)\n  }\n}\n"],"names":["logAppDirError","err","isError","stack","cleanedStack","split","map","line","replace","filteredStack","filter","test","length","Log","error","join","digest","console","JSON","stringify","cause"],"mappings":";;;;+BAGgBA;;;eAAAA;;;gEAHI;6DACC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEd,SAASA,eAAeC,GAAY;IACzC,IAAIC,IAAAA,gBAAO,EAACD,SAAQA,uBAAAA,IAAKE,KAAK,GAAE;QAC9B,MAAMC,eAAeH,IAAIE,KAAK,CAACE,KAAK,CAAC,MAAMC,GAAG,CAAC,CAACC,OAC9C,iDAAiD;YACjDA,KAAKC,OAAO,CAAC,mDAAmD;QAElE,MAAMC,gBAAgBL,YACpB,iDAAiD;SAChDM,MAAM,CACL,CAACH,OACC,CAAC,qCAAqCI,IAAI,CAACJ,SAC3C,CAAC,4BAA4BI,IAAI,CAACJ,SAClC,CAAC,6BAA6BI,IAAI,CAACJ;QAEzC,IAAIE,cAAcG,MAAM,KAAK,GAAG;YAC9B,uEAAuE;YACvEC,KAAIC,KAAK,CAAC,CAAC,gBAAgB,EAAEV,aAAaW,IAAI,CAAC,MAAM,CAAC;QACxD,OAAO;YACLF,KAAIC,KAAK,CAACL,cAAcM,IAAI,CAAC;QAC/B;QACA,IAAI,OAAO,AAACd,IAAYe,MAAM,KAAK,aAAa;YAC9CC,QAAQH,KAAK,CAAC,CAAC,QAAQ,EAAEI,KAAKC,SAAS,CAAC,AAAClB,IAAYe,MAAM,EAAE,CAAC;QAChE;QAEA,IAAIf,IAAImB,KAAK,EAAEH,QAAQH,KAAK,CAAC,UAAUb,IAAImB,KAAK;IAClD,OAAO;QACLP,KAAIC,KAAK,CAACb;IACZ;AACF"}