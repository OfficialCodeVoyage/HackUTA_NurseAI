{"version":3,"sources":["../../../../../../src/build/webpack/plugins/terser-webpack-plugin/src/minify.ts"],"sourcesContent":["import terser from 'next/dist/compiled/terser'\n\nfunction buildTerserOptions(terserOptions: any = {}) {\n  return {\n    ...terserOptions,\n    mangle:\n      terserOptions.mangle == null\n        ? true\n        : typeof terserOptions.mangle === 'boolean'\n          ? terserOptions.mangle\n          : { ...terserOptions.mangle },\n    // Ignoring sourceMap from options\n    // eslint-disable-next-line no-undefined\n    sourceMap: undefined,\n    // the `output` option is deprecated\n    ...(terserOptions.format\n      ? { format: { beautify: false, ...terserOptions.format } }\n      : { output: { beautify: false, ...terserOptions.output } }),\n  }\n}\n\nexport async function minify(options: any) {\n  const { name, input, inputSourceMap, terserOptions } = options\n  // Copy terser options\n  const opts = buildTerserOptions(terserOptions)\n\n  // Let terser generate a SourceMap\n  if (inputSourceMap) {\n    // @ts-ignore\n    opts.sourceMap = { asObject: true }\n  }\n\n  const result = await terser.minify({ [name]: input }, opts)\n  return result\n}\n"],"names":["terser","buildTerserOptions","terserOptions","mangle","sourceMap","undefined","format","beautify","output","minify","options","name","input","inputSourceMap","opts","asObject","result"],"mappings":"AAAA,OAAOA,YAAY,4BAA2B;AAE9C,SAASC,mBAAmBC,gBAAqB,CAAC,CAAC;IACjD,OAAO;QACL,GAAGA,aAAa;QAChBC,QACED,cAAcC,MAAM,IAAI,OACpB,OACA,OAAOD,cAAcC,MAAM,KAAK,YAC9BD,cAAcC,MAAM,GACpB;YAAE,GAAGD,cAAcC,MAAM;QAAC;QAClC,kCAAkC;QAClC,wCAAwC;QACxCC,WAAWC;QACX,oCAAoC;QACpC,GAAIH,cAAcI,MAAM,GACpB;YAAEA,QAAQ;gBAAEC,UAAU;gBAAO,GAAGL,cAAcI,MAAM;YAAC;QAAE,IACvD;YAAEE,QAAQ;gBAAED,UAAU;gBAAO,GAAGL,cAAcM,MAAM;YAAC;QAAE,CAAC;IAC9D;AACF;AAEA,OAAO,eAAeC,OAAOC,OAAY;IACvC,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAEC,cAAc,EAAEX,aAAa,EAAE,GAAGQ;IACvD,sBAAsB;IACtB,MAAMI,OAAOb,mBAAmBC;IAEhC,kCAAkC;IAClC,IAAIW,gBAAgB;QAClB,aAAa;QACbC,KAAKV,SAAS,GAAG;YAAEW,UAAU;QAAK;IACpC;IAEA,MAAMC,SAAS,MAAMhB,OAAOS,MAAM,CAAC;QAAE,CAACE,KAAK,EAAEC;IAAM,GAAGE;IACtD,OAAOE;AACT"}