{"version":3,"sources":["../../../../../../src/client/components/react-dev-overlay/internal/helpers/getErrorByType.ts"],"sourcesContent":["import {\n  ACTION_UNHANDLED_ERROR,\n  ACTION_UNHANDLED_REJECTION,\n} from '../../shared'\nimport type { SupportedErrorEvent } from '../container/Errors'\nimport { getOriginalStackFrames } from './stack-frame'\nimport type { OriginalStackFrame } from './stack-frame'\nimport type { ComponentStackFrame } from './parse-component-stack'\nimport { getErrorSource } from '../../../../../shared/lib/error-source'\n\nexport type ReadyRuntimeError = {\n  id: number\n  runtime: true\n  error: Error\n  frames: OriginalStackFrame[]\n  componentStackFrames?: ComponentStackFrame[]\n}\n\nexport async function getErrorByType(\n  ev: SupportedErrorEvent,\n  isAppDir: boolean\n): Promise<ReadyRuntimeError> {\n  const { id, event } = ev\n  switch (event.type) {\n    case ACTION_UNHANDLED_ERROR:\n    case ACTION_UNHANDLED_REJECTION: {\n      const readyRuntimeError: ReadyRuntimeError = {\n        id,\n        runtime: true,\n        error: event.reason,\n        frames: await getOriginalStackFrames(\n          event.frames,\n          getErrorSource(event.reason),\n          isAppDir,\n          event.reason.toString()\n        ),\n      }\n      if (event.type === ACTION_UNHANDLED_ERROR) {\n        readyRuntimeError.componentStackFrames = event.componentStackFrames\n      }\n      return readyRuntimeError\n    }\n    default: {\n      break\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const _: never = event\n  throw new Error('type system invariant violation')\n}\n"],"names":["ACTION_UNHANDLED_ERROR","ACTION_UNHANDLED_REJECTION","getOriginalStackFrames","getErrorSource","getErrorByType","ev","isAppDir","id","event","type","readyRuntimeError","runtime","error","reason","frames","toString","componentStackFrames","_","Error"],"mappings":"AAAA,SACEA,sBAAsB,EACtBC,0BAA0B,QACrB,eAAc;AAErB,SAASC,sBAAsB,QAAQ,gBAAe;AAGtD,SAASC,cAAc,QAAQ,yCAAwC;AAUvE,OAAO,eAAeC,eACpBC,EAAuB,EACvBC,QAAiB;IAEjB,MAAM,EAAEC,EAAE,EAAEC,KAAK,EAAE,GAAGH;IACtB,OAAQG,MAAMC,IAAI;QAChB,KAAKT;QACL,KAAKC;YAA4B;gBAC/B,MAAMS,oBAAuC;oBAC3CH;oBACAI,SAAS;oBACTC,OAAOJ,MAAMK,MAAM;oBACnBC,QAAQ,MAAMZ,uBACZM,MAAMM,MAAM,EACZX,eAAeK,MAAMK,MAAM,GAC3BP,UACAE,MAAMK,MAAM,CAACE,QAAQ;gBAEzB;gBACA,IAAIP,MAAMC,IAAI,KAAKT,wBAAwB;oBACzCU,kBAAkBM,oBAAoB,GAAGR,MAAMQ,oBAAoB;gBACrE;gBACA,OAAON;YACT;QACA;YAAS;gBACP;YACF;IACF;IACA,6DAA6D;IAC7D,MAAMO,IAAWT;IACjB,MAAM,IAAIU,MAAM;AAClB"}