{"version":3,"sources":["../../src/pages/_document.tsx"],"sourcesContent":["import React, { type JSX } from 'react'\nimport type { ReactElement, ReactNode } from 'react'\nimport {\n  OPTIMIZED_FONT_PROVIDERS,\n  NEXT_BUILTIN_DOCUMENT,\n} from '../shared/lib/constants'\nimport type {\n  DocumentContext,\n  DocumentInitialProps,\n  DocumentProps,\n  DocumentType,\n  NEXT_DATA,\n} from '../shared/lib/utils'\nimport type { ScriptProps } from '../client/script'\nimport type { NextFontManifest } from '../build/webpack/plugins/next-font-manifest-plugin'\n\nimport { getPageFiles } from '../server/get-page-files'\nimport type { BuildManifest } from '../server/get-page-files'\nimport { htmlEscapeJsonString } from '../server/htmlescape'\nimport isError from '../lib/is-error'\n\nimport {\n  HtmlContext,\n  useHtmlContext,\n} from '../shared/lib/html-context.shared-runtime'\nimport type { HtmlProps } from '../shared/lib/html-context.shared-runtime'\nimport { encodeURIPath } from '../shared/lib/encode-uri-path'\nimport type { DeepReadonly } from '../shared/lib/deep-readonly'\n\nexport type { DocumentContext, DocumentInitialProps, DocumentProps }\n\nexport type OriginProps = {\n  nonce?: string\n  crossOrigin?: 'anonymous' | 'use-credentials' | '' | undefined\n  children?: React.ReactNode\n}\n\ntype DocumentFiles = {\n  sharedFiles: readonly string[]\n  pageFiles: readonly string[]\n  allFiles: readonly string[]\n}\n\ntype HeadHTMLProps = React.DetailedHTMLProps<\n  React.HTMLAttributes<HTMLHeadElement>,\n  HTMLHeadElement\n>\n\ntype HeadProps = OriginProps & HeadHTMLProps\n\n/** Set of pages that have triggered a large data warning on production mode. */\nconst largePageDataWarnings = new Set<string>()\n\nfunction getDocumentFiles(\n  buildManifest: BuildManifest,\n  pathname: string,\n  inAmpMode: boolean\n): DocumentFiles {\n  const sharedFiles: readonly string[] = getPageFiles(buildManifest, '/_app')\n  const pageFiles: readonly string[] =\n    process.env.NEXT_RUNTIME !== 'edge' && inAmpMode\n      ? []\n      : getPageFiles(buildManifest, pathname)\n\n  return {\n    sharedFiles,\n    pageFiles,\n    allFiles: [...new Set([...sharedFiles, ...pageFiles])],\n  }\n}\n\nfunction getPolyfillScripts(context: HtmlProps, props: OriginProps) {\n  // polyfills.js has to be rendered as nomodule without async\n  // It also has to be the first script to load\n  const {\n    assetPrefix,\n    buildManifest,\n    assetQueryString,\n    disableOptimizedLoading,\n    crossOrigin,\n  } = context\n\n  return buildManifest.polyfillFiles\n    .filter(\n      (polyfill) => polyfill.endsWith('.js') && !polyfill.endsWith('.module.js')\n    )\n    .map((polyfill) => (\n      <script\n        key={polyfill}\n        defer={!disableOptimizedLoading}\n        nonce={props.nonce}\n        crossOrigin={props.crossOrigin || crossOrigin}\n        noModule={true}\n        src={`${assetPrefix}/_next/${encodeURIPath(\n          polyfill\n        )}${assetQueryString}`}\n      />\n    ))\n}\n\nfunction hasComponentProps(child: any): child is React.ReactElement<any> {\n  return !!child && !!child.props\n}\n\nfunction AmpStyles({\n  styles,\n}: {\n  styles?: React.ReactElement[] | Iterable<React.ReactNode>\n}) {\n  if (!styles) return null\n\n  // try to parse styles from fragment for backwards compat\n  const curStyles: React.ReactElement<any>[] = Array.isArray(styles)\n    ? (styles as React.ReactElement[])\n    : []\n  if (\n    // @ts-ignore Property 'props' does not exist on type ReactElement\n    styles.props &&\n    // @ts-ignore Property 'props' does not exist on type ReactElement\n    Array.isArray(styles.props.children)\n  ) {\n    const hasStyles = (el: React.ReactElement<any>) =>\n      el?.props?.dangerouslySetInnerHTML?.__html\n    // @ts-ignore Property 'props' does not exist on type ReactElement\n    styles.props.children.forEach((child: React.ReactElement) => {\n      if (Array.isArray(child)) {\n        child.forEach((el) => hasStyles(el) && curStyles.push(el))\n      } else if (hasStyles(child)) {\n        curStyles.push(child)\n      }\n    })\n  }\n\n  /* Add custom styles before AMP styles to prevent accidental overrides */\n  return (\n    <style\n      amp-custom=\"\"\n      dangerouslySetInnerHTML={{\n        __html: curStyles\n          .map((style) => style.props.dangerouslySetInnerHTML.__html)\n          .join('')\n          .replace(/\\/\\*# sourceMappingURL=.*\\*\\//g, '')\n          .replace(/\\/\\*@ sourceURL=.*?\\*\\//g, ''),\n      }}\n    />\n  )\n}\n\nfunction getDynamicChunks(\n  context: HtmlProps,\n  props: OriginProps,\n  files: DocumentFiles\n) {\n  const {\n    dynamicImports,\n    assetPrefix,\n    isDevelopment,\n    assetQueryString,\n    disableOptimizedLoading,\n    crossOrigin,\n  } = context\n\n  return dynamicImports.map((file) => {\n    if (!file.endsWith('.js') || files.allFiles.includes(file)) return null\n\n    return (\n      <script\n        async={!isDevelopment && disableOptimizedLoading}\n        defer={!disableOptimizedLoading}\n        key={file}\n        src={`${assetPrefix}/_next/${encodeURIPath(file)}${assetQueryString}`}\n        nonce={props.nonce}\n        crossOrigin={props.crossOrigin || crossOrigin}\n      />\n    )\n  })\n}\n\nfunction getScripts(\n  context: HtmlProps,\n  props: OriginProps,\n  files: DocumentFiles\n) {\n  const {\n    assetPrefix,\n    buildManifest,\n    isDevelopment,\n    assetQueryString,\n    disableOptimizedLoading,\n    crossOrigin,\n  } = context\n\n  const normalScripts = files.allFiles.filter((file) => file.endsWith('.js'))\n  const lowPriorityScripts = buildManifest.lowPriorityFiles?.filter((file) =>\n    file.endsWith('.js')\n  )\n\n  return [...normalScripts, ...lowPriorityScripts].map((file) => {\n    return (\n      <script\n        key={file}\n        src={`${assetPrefix}/_next/${encodeURIPath(file)}${assetQueryString}`}\n        nonce={props.nonce}\n        async={!isDevelopment && disableOptimizedLoading}\n        defer={!disableOptimizedLoading}\n        crossOrigin={props.crossOrigin || crossOrigin}\n      />\n    )\n  })\n}\n\nfunction getPreNextWorkerScripts(context: HtmlProps, props: OriginProps) {\n  const { assetPrefix, scriptLoader, crossOrigin, nextScriptWorkers } = context\n\n  // disable `nextScriptWorkers` in edge runtime\n  if (!nextScriptWorkers || process.env.NEXT_RUNTIME === 'edge') return null\n\n  try {\n    let {\n      partytownSnippet,\n      // @ts-ignore: Prevent webpack from processing this require\n    } = __non_webpack_require__('@builder.io/partytown/integration'!)\n\n    const children = Array.isArray(props.children)\n      ? props.children\n      : [props.children]\n\n    // Check to see if the user has defined their own Partytown configuration\n    const userDefinedConfig = children.find(\n      (child) =>\n        hasComponentProps(child) &&\n        child?.props?.dangerouslySetInnerHTML?.__html.length &&\n        'data-partytown-config' in child.props\n    )\n\n    return (\n      <>\n        {!userDefinedConfig && (\n          <script\n            data-partytown-config=\"\"\n            dangerouslySetInnerHTML={{\n              __html: `\n            partytown = {\n              lib: \"${assetPrefix}/_next/static/~partytown/\"\n            };\n          `,\n            }}\n          />\n        )}\n        <script\n          data-partytown=\"\"\n          dangerouslySetInnerHTML={{\n            __html: partytownSnippet(),\n          }}\n        />\n        {(scriptLoader.worker || []).map((file: ScriptProps, index: number) => {\n          const {\n            strategy,\n            src,\n            children: scriptChildren,\n            dangerouslySetInnerHTML,\n            ...scriptProps\n          } = file\n\n          let srcProps: {\n            src?: string\n            dangerouslySetInnerHTML?: ScriptProps['dangerouslySetInnerHTML']\n          } = {}\n\n          if (src) {\n            // Use external src if provided\n            srcProps.src = src\n          } else if (\n            dangerouslySetInnerHTML &&\n            dangerouslySetInnerHTML.__html\n          ) {\n            // Embed inline script if provided with dangerouslySetInnerHTML\n            srcProps.dangerouslySetInnerHTML = {\n              __html: dangerouslySetInnerHTML.__html,\n            }\n          } else if (scriptChildren) {\n            // Embed inline script if provided with children\n            srcProps.dangerouslySetInnerHTML = {\n              __html:\n                typeof scriptChildren === 'string'\n                  ? scriptChildren\n                  : Array.isArray(scriptChildren)\n                    ? scriptChildren.join('')\n                    : '',\n            }\n          } else {\n            throw new Error(\n              'Invalid usage of next/script. Did you forget to include a src attribute or an inline script? https://nextjs.org/docs/messages/invalid-script'\n            )\n          }\n\n          return (\n            <script\n              {...srcProps}\n              {...scriptProps}\n              type=\"text/partytown\"\n              key={src || index}\n              nonce={props.nonce}\n              data-nscript=\"worker\"\n              crossOrigin={props.crossOrigin || crossOrigin}\n            />\n          )\n        })}\n      </>\n    )\n  } catch (err) {\n    if (isError(err) && err.code !== 'MODULE_NOT_FOUND') {\n      console.warn(`Warning: ${err.message}`)\n    }\n    return null\n  }\n}\n\nfunction getPreNextScripts(context: HtmlProps, props: OriginProps) {\n  const { scriptLoader, disableOptimizedLoading, crossOrigin } = context\n\n  const webWorkerScripts = getPreNextWorkerScripts(context, props)\n\n  const beforeInteractiveScripts = (scriptLoader.beforeInteractive || [])\n    .filter((script) => script.src)\n    .map((file: ScriptProps, index: number) => {\n      const { strategy, ...scriptProps } = file\n      return (\n        <script\n          {...scriptProps}\n          key={scriptProps.src || index}\n          defer={scriptProps.defer ?? !disableOptimizedLoading}\n          nonce={props.nonce}\n          data-nscript=\"beforeInteractive\"\n          crossOrigin={props.crossOrigin || crossOrigin}\n        />\n      )\n    })\n\n  return (\n    <>\n      {webWorkerScripts}\n      {beforeInteractiveScripts}\n    </>\n  )\n}\n\nfunction getHeadHTMLProps(props: HeadProps) {\n  const { crossOrigin, nonce, ...restProps } = props\n\n  // This assignment is necessary for additional type checking to avoid unsupported attributes in <head>\n  const headProps: HeadHTMLProps & {\n    [P in Exclude<keyof HeadProps, keyof HeadHTMLProps>]?: never\n  } = restProps\n\n  return headProps\n}\n\nfunction getAmpPath(ampPath: string, asPath: string): string {\n  return ampPath || `${asPath}${asPath.includes('?') ? '&' : '?'}amp=1`\n}\n\nfunction getNextFontLinkTags(\n  nextFontManifest: DeepReadonly<NextFontManifest> | undefined,\n  dangerousAsPath: string,\n  assetPrefix: string = ''\n) {\n  if (!nextFontManifest) {\n    return {\n      preconnect: null,\n      preload: null,\n    }\n  }\n\n  const appFontsEntry = nextFontManifest.pages['/_app']\n  const pageFontsEntry = nextFontManifest.pages[dangerousAsPath]\n\n  const preloadedFontFiles = Array.from(\n    new Set([...(appFontsEntry ?? []), ...(pageFontsEntry ?? [])])\n  )\n\n  // If no font files should preload but there's an entry for the path, add a preconnect tag.\n  const preconnectToSelf = !!(\n    preloadedFontFiles.length === 0 &&\n    (appFontsEntry || pageFontsEntry)\n  )\n\n  return {\n    preconnect: preconnectToSelf ? (\n      <link\n        data-next-font={\n          nextFontManifest.pagesUsingSizeAdjust ? 'size-adjust' : ''\n        }\n        rel=\"preconnect\"\n        href=\"/\"\n        crossOrigin=\"anonymous\"\n      />\n    ) : null,\n    preload: preloadedFontFiles\n      ? preloadedFontFiles.map((fontFile) => {\n          const ext = /\\.(woff|woff2|eot|ttf|otf)$/.exec(fontFile)![1]\n          return (\n            <link\n              key={fontFile}\n              rel=\"preload\"\n              href={`${assetPrefix}/_next/${encodeURIPath(fontFile)}`}\n              as=\"font\"\n              type={`font/${ext}`}\n              crossOrigin=\"anonymous\"\n              data-next-font={fontFile.includes('-s') ? 'size-adjust' : ''}\n            />\n          )\n        })\n      : null,\n  }\n}\n\n// Use `React.Component` to avoid errors from the RSC checks because\n// it can't be imported directly in Server Components:\n//\n//   import { Component } from 'react'\n//\n// More info: https://github.com/vercel/next.js/pull/40686\nexport class Head extends React.Component<HeadProps> {\n  static contextType = HtmlContext\n\n  context!: HtmlProps\n\n  getCssLinks(files: DocumentFiles): JSX.Element[] | null {\n    const {\n      assetPrefix,\n      assetQueryString,\n      dynamicImports,\n      crossOrigin,\n      optimizeCss,\n      optimizeFonts,\n    } = this.context\n    const cssFiles = files.allFiles.filter((f) => f.endsWith('.css'))\n    const sharedFiles: Set<string> = new Set(files.sharedFiles)\n\n    // Unmanaged files are CSS files that will be handled directly by the\n    // webpack runtime (`mini-css-extract-plugin`).\n    let unmangedFiles: Set<string> = new Set([])\n    let dynamicCssFiles = Array.from(\n      new Set(dynamicImports.filter((file) => file.endsWith('.css')))\n    )\n    if (dynamicCssFiles.length) {\n      const existing = new Set(cssFiles)\n      dynamicCssFiles = dynamicCssFiles.filter(\n        (f) => !(existing.has(f) || sharedFiles.has(f))\n      )\n      unmangedFiles = new Set(dynamicCssFiles)\n      cssFiles.push(...dynamicCssFiles)\n    }\n\n    let cssLinkElements: JSX.Element[] = []\n    cssFiles.forEach((file) => {\n      const isSharedFile = sharedFiles.has(file)\n\n      if (!optimizeCss) {\n        cssLinkElements.push(\n          <link\n            key={`${file}-preload`}\n            nonce={this.props.nonce}\n            rel=\"preload\"\n            href={`${assetPrefix}/_next/${encodeURIPath(\n              file\n            )}${assetQueryString}`}\n            as=\"style\"\n            crossOrigin={this.props.crossOrigin || crossOrigin}\n          />\n        )\n      }\n\n      const isUnmanagedFile = unmangedFiles.has(file)\n      cssLinkElements.push(\n        <link\n          key={file}\n          nonce={this.props.nonce}\n          rel=\"stylesheet\"\n          href={`${assetPrefix}/_next/${encodeURIPath(\n            file\n          )}${assetQueryString}`}\n          crossOrigin={this.props.crossOrigin || crossOrigin}\n          data-n-g={isUnmanagedFile ? undefined : isSharedFile ? '' : undefined}\n          data-n-p={isUnmanagedFile ? undefined : isSharedFile ? undefined : ''}\n        />\n      )\n    })\n\n    if (process.env.NODE_ENV !== 'development' && optimizeFonts) {\n      cssLinkElements = this.makeStylesheetInert(\n        cssLinkElements\n      ) as ReactElement[]\n    }\n\n    return cssLinkElements.length === 0 ? null : cssLinkElements\n  }\n\n  getPreloadDynamicChunks() {\n    const { dynamicImports, assetPrefix, assetQueryString, crossOrigin } =\n      this.context\n\n    return (\n      dynamicImports\n        .map((file) => {\n          if (!file.endsWith('.js')) {\n            return null\n          }\n\n          return (\n            <link\n              rel=\"preload\"\n              key={file}\n              href={`${assetPrefix}/_next/${encodeURIPath(\n                file\n              )}${assetQueryString}`}\n              as=\"script\"\n              nonce={this.props.nonce}\n              crossOrigin={this.props.crossOrigin || crossOrigin}\n            />\n          )\n        })\n        // Filter out nulled scripts\n        .filter(Boolean)\n    )\n  }\n\n  getPreloadMainLinks(files: DocumentFiles): JSX.Element[] | null {\n    const { assetPrefix, assetQueryString, scriptLoader, crossOrigin } =\n      this.context\n    const preloadFiles = files.allFiles.filter((file: string) => {\n      return file.endsWith('.js')\n    })\n\n    return [\n      ...(scriptLoader.beforeInteractive || []).map((file) => (\n        <link\n          key={file.src}\n          nonce={this.props.nonce}\n          rel=\"preload\"\n          href={file.src}\n          as=\"script\"\n          crossOrigin={this.props.crossOrigin || crossOrigin}\n        />\n      )),\n      ...preloadFiles.map((file: string) => (\n        <link\n          key={file}\n          nonce={this.props.nonce}\n          rel=\"preload\"\n          href={`${assetPrefix}/_next/${encodeURIPath(\n            file\n          )}${assetQueryString}`}\n          as=\"script\"\n          crossOrigin={this.props.crossOrigin || crossOrigin}\n        />\n      )),\n    ]\n  }\n\n  getBeforeInteractiveInlineScripts() {\n    const { scriptLoader } = this.context\n    const { nonce, crossOrigin } = this.props\n\n    return (scriptLoader.beforeInteractive || [])\n      .filter(\n        (script) =>\n          !script.src && (script.dangerouslySetInnerHTML || script.children)\n      )\n      .map((file: ScriptProps, index: number) => {\n        const {\n          strategy,\n          children,\n          dangerouslySetInnerHTML,\n          src,\n          ...scriptProps\n        } = file\n        let html: NonNullable<\n          ScriptProps['dangerouslySetInnerHTML']\n        >['__html'] = ''\n\n        if (dangerouslySetInnerHTML && dangerouslySetInnerHTML.__html) {\n          html = dangerouslySetInnerHTML.__html\n        } else if (children) {\n          html =\n            typeof children === 'string'\n              ? children\n              : Array.isArray(children)\n                ? children.join('')\n                : ''\n        }\n\n        return (\n          <script\n            {...scriptProps}\n            dangerouslySetInnerHTML={{ __html: html }}\n            key={scriptProps.id || index}\n            nonce={nonce}\n            data-nscript=\"beforeInteractive\"\n            crossOrigin={\n              crossOrigin ||\n              (process.env.__NEXT_CROSS_ORIGIN as typeof crossOrigin)\n            }\n          />\n        )\n      })\n  }\n\n  getDynamicChunks(files: DocumentFiles) {\n    return getDynamicChunks(this.context, this.props, files)\n  }\n\n  getPreNextScripts() {\n    return getPreNextScripts(this.context, this.props)\n  }\n\n  getScripts(files: DocumentFiles) {\n    return getScripts(this.context, this.props, files)\n  }\n\n  getPolyfillScripts() {\n    return getPolyfillScripts(this.context, this.props)\n  }\n\n  makeStylesheetInert(node: ReactNode[]): ReactNode[] {\n    return React.Children.map(node, (c: any) => {\n      if (\n        c?.type === 'link' &&\n        c?.props?.href &&\n        OPTIMIZED_FONT_PROVIDERS.some(({ url }) =>\n          c?.props?.href?.startsWith(url)\n        )\n      ) {\n        const newProps = {\n          ...(c.props || {}),\n          'data-href': c.props.href,\n          href: undefined,\n        }\n\n        return React.cloneElement(c, newProps)\n      } else if (c?.props?.children) {\n        const newProps = {\n          ...(c.props || {}),\n          children: this.makeStylesheetInert(c.props.children),\n        }\n\n        return React.cloneElement(c, newProps)\n      }\n\n      return c\n      // @types/react bug. Returned value from .map will not be `null` if you pass in `[null]`\n    })!.filter(Boolean)\n  }\n\n  render() {\n    const {\n      styles,\n      ampPath,\n      inAmpMode,\n      hybridAmp,\n      canonicalBase,\n      __NEXT_DATA__,\n      dangerousAsPath,\n      headTags,\n      unstable_runtimeJS,\n      unstable_JsPreload,\n      disableOptimizedLoading,\n      optimizeCss,\n      optimizeFonts,\n      assetPrefix,\n      nextFontManifest,\n    } = this.context\n\n    const disableRuntimeJS = unstable_runtimeJS === false\n    const disableJsPreload =\n      unstable_JsPreload === false || !disableOptimizedLoading\n\n    this.context.docComponentsRendered.Head = true\n\n    let { head } = this.context\n    let cssPreloads: Array<JSX.Element> = []\n    let otherHeadElements: Array<JSX.Element> = []\n    if (head) {\n      head.forEach((child) => {\n        if (\n          child &&\n          child.type === 'link' &&\n          child.props['rel'] === 'preload' &&\n          child.props['as'] === 'style'\n        ) {\n          if (this.context.strictNextHead) {\n            cssPreloads.push(\n              React.cloneElement(child, { 'data-next-head': '' })\n            )\n          } else {\n            cssPreloads.push(child)\n          }\n        } else {\n          if (child) {\n            if (this.context.strictNextHead) {\n              otherHeadElements.push(\n                React.cloneElement(child, { 'data-next-head': '' })\n              )\n            } else {\n              otherHeadElements.push(child)\n            }\n          }\n        }\n      })\n      head = cssPreloads.concat(otherHeadElements)\n    }\n    let children: React.ReactNode[] = React.Children.toArray(\n      this.props.children\n    ).filter(Boolean)\n    // show a warning if Head contains <title> (only in development)\n    if (process.env.NODE_ENV !== 'production') {\n      children = React.Children.map(children, (child: any) => {\n        const isReactHelmet = child?.props?.['data-react-helmet']\n        if (!isReactHelmet) {\n          if (child?.type === 'title') {\n            console.warn(\n              \"Warning: <title> should not be used in _document.js's <Head>. https://nextjs.org/docs/messages/no-document-title\"\n            )\n          } else if (\n            child?.type === 'meta' &&\n            child?.props?.name === 'viewport'\n          ) {\n            console.warn(\n              \"Warning: viewport meta tags should not be used in _document.js's <Head>. https://nextjs.org/docs/messages/no-document-viewport-meta\"\n            )\n          }\n        }\n        return child\n        // @types/react bug. Returned value from .map will not be `null` if you pass in `[null]`\n      })!\n      if (this.props.crossOrigin)\n        console.warn(\n          'Warning: `Head` attribute `crossOrigin` is deprecated. https://nextjs.org/docs/messages/doc-crossorigin-deprecated'\n        )\n    }\n\n    if (\n      process.env.NODE_ENV !== 'development' &&\n      optimizeFonts &&\n      !(process.env.NEXT_RUNTIME !== 'edge' && inAmpMode)\n    ) {\n      children = this.makeStylesheetInert(children)\n    }\n\n    let hasAmphtmlRel = false\n    let hasCanonicalRel = false\n\n    // show warning and remove conflicting amp head tags\n    head = React.Children.map(head || [], (child) => {\n      if (!child) return child\n      const { type, props } = child\n      if (process.env.NEXT_RUNTIME !== 'edge' && inAmpMode) {\n        let badProp: string = ''\n\n        if (type === 'meta' && props.name === 'viewport') {\n          badProp = 'name=\"viewport\"'\n        } else if (type === 'link' && props.rel === 'canonical') {\n          hasCanonicalRel = true\n        } else if (type === 'script') {\n          // only block if\n          // 1. it has a src and isn't pointing to ampproject's CDN\n          // 2. it is using dangerouslySetInnerHTML without a type or\n          // a type of text/javascript\n          if (\n            (props.src && props.src.indexOf('ampproject') < -1) ||\n            (props.dangerouslySetInnerHTML &&\n              (!props.type || props.type === 'text/javascript'))\n          ) {\n            badProp = '<script'\n            Object.keys(props).forEach((prop) => {\n              badProp += ` ${prop}=\"${props[prop]}\"`\n            })\n            badProp += '/>'\n          }\n        }\n\n        if (badProp) {\n          console.warn(\n            `Found conflicting amp tag \"${child.type}\" with conflicting prop ${badProp} in ${__NEXT_DATA__.page}. https://nextjs.org/docs/messages/conflicting-amp-tag`\n          )\n          return null\n        }\n      } else {\n        // non-amp mode\n        if (type === 'link' && props.rel === 'amphtml') {\n          hasAmphtmlRel = true\n        }\n      }\n      return child\n      // @types/react bug. Returned value from .map will not be `null` if you pass in `[null]`\n    })!\n\n    const files: DocumentFiles = getDocumentFiles(\n      this.context.buildManifest,\n      this.context.__NEXT_DATA__.page,\n      process.env.NEXT_RUNTIME !== 'edge' && inAmpMode\n    )\n\n    const nextFontLinkTags = getNextFontLinkTags(\n      nextFontManifest,\n      dangerousAsPath,\n      assetPrefix\n    )\n\n    return (\n      <head {...getHeadHTMLProps(this.props)}>\n        {this.context.isDevelopment && (\n          <>\n            <style\n              data-next-hide-fouc\n              data-ampdevmode={\n                process.env.NEXT_RUNTIME !== 'edge' && inAmpMode\n                  ? 'true'\n                  : undefined\n              }\n              dangerouslySetInnerHTML={{\n                __html: `body{display:none}`,\n              }}\n            />\n            <noscript\n              data-next-hide-fouc\n              data-ampdevmode={\n                process.env.NEXT_RUNTIME !== 'edge' && inAmpMode\n                  ? 'true'\n                  : undefined\n              }\n            >\n              <style\n                dangerouslySetInnerHTML={{\n                  __html: `body{display:block}`,\n                }}\n              />\n            </noscript>\n          </>\n        )}\n        {head}\n        {this.context.strictNextHead ? null : (\n          <meta\n            name=\"next-head-count\"\n            content={React.Children.count(head || []).toString()}\n          />\n        )}\n\n        {children}\n        {optimizeFonts && <meta name=\"next-font-preconnect\" />}\n\n        {nextFontLinkTags.preconnect}\n        {nextFontLinkTags.preload}\n\n        {process.env.NEXT_RUNTIME !== 'edge' && inAmpMode && (\n          <>\n            <meta\n              name=\"viewport\"\n              content=\"width=device-width,minimum-scale=1,initial-scale=1\"\n            />\n            {!hasCanonicalRel && (\n              <link\n                rel=\"canonical\"\n                href={\n                  canonicalBase +\n                  require('../server/utils').cleanAmpPath(dangerousAsPath)\n                }\n              />\n            )}\n            {/* https://www.ampproject.org/docs/fundamentals/optimize_amp#optimize-the-amp-runtime-loading */}\n            <link\n              rel=\"preload\"\n              as=\"script\"\n              href=\"https://cdn.ampproject.org/v0.js\"\n            />\n            <AmpStyles styles={styles} />\n            <style\n              amp-boilerplate=\"\"\n              dangerouslySetInnerHTML={{\n                __html: `body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}`,\n              }}\n            />\n            <noscript>\n              <style\n                amp-boilerplate=\"\"\n                dangerouslySetInnerHTML={{\n                  __html: `body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}`,\n                }}\n              />\n            </noscript>\n            <script async src=\"https://cdn.ampproject.org/v0.js\" />\n          </>\n        )}\n        {!(process.env.NEXT_RUNTIME !== 'edge' && inAmpMode) && (\n          <>\n            {!hasAmphtmlRel && hybridAmp && (\n              <link\n                rel=\"amphtml\"\n                href={canonicalBase + getAmpPath(ampPath, dangerousAsPath)}\n              />\n            )}\n            {this.getBeforeInteractiveInlineScripts()}\n            {!optimizeCss && this.getCssLinks(files)}\n            {!optimizeCss && <noscript data-n-css={this.props.nonce ?? ''} />}\n\n            {!disableRuntimeJS &&\n              !disableJsPreload &&\n              this.getPreloadDynamicChunks()}\n            {!disableRuntimeJS &&\n              !disableJsPreload &&\n              this.getPreloadMainLinks(files)}\n\n            {!disableOptimizedLoading &&\n              !disableRuntimeJS &&\n              this.getPolyfillScripts()}\n\n            {!disableOptimizedLoading &&\n              !disableRuntimeJS &&\n              this.getPreNextScripts()}\n            {!disableOptimizedLoading &&\n              !disableRuntimeJS &&\n              this.getDynamicChunks(files)}\n            {!disableOptimizedLoading &&\n              !disableRuntimeJS &&\n              this.getScripts(files)}\n\n            {optimizeCss && this.getCssLinks(files)}\n            {optimizeCss && <noscript data-n-css={this.props.nonce ?? ''} />}\n            {this.context.isDevelopment && (\n              // this element is used to mount development styles so the\n              // ordering matches production\n              // (by default, style-loader injects at the bottom of <head />)\n              <noscript id=\"__next_css__DO_NOT_USE__\" />\n            )}\n            {styles || null}\n          </>\n        )}\n        {React.createElement(React.Fragment, {}, ...(headTags || []))}\n      </head>\n    )\n  }\n}\n\nfunction handleDocumentScriptLoaderItems(\n  scriptLoader: { beforeInteractive?: any[] },\n  __NEXT_DATA__: NEXT_DATA,\n  props: any\n): void {\n  if (!props.children) return\n\n  const scriptLoaderItems: ScriptProps[] = []\n\n  const children = Array.isArray(props.children)\n    ? props.children\n    : [props.children]\n\n  const headChildren = children.find(\n    (child: React.ReactElement) => child.type === Head\n  )?.props?.children\n  const bodyChildren = children.find(\n    (child: React.ReactElement) => child.type === 'body'\n  )?.props?.children\n\n  // Scripts with beforeInteractive can be placed inside Head or <body> so children of both needs to be traversed\n  const combinedChildren = [\n    ...(Array.isArray(headChildren) ? headChildren : [headChildren]),\n    ...(Array.isArray(bodyChildren) ? bodyChildren : [bodyChildren]),\n  ]\n\n  React.Children.forEach(combinedChildren, (child: any) => {\n    if (!child) return\n\n    // When using the `next/script` component, register it in script loader.\n    if (child.type?.__nextScript) {\n      if (child.props.strategy === 'beforeInteractive') {\n        scriptLoader.beforeInteractive = (\n          scriptLoader.beforeInteractive || []\n        ).concat([\n          {\n            ...child.props,\n          },\n        ])\n        return\n      } else if (\n        ['lazyOnload', 'afterInteractive', 'worker'].includes(\n          child.props.strategy\n        )\n      ) {\n        scriptLoaderItems.push(child.props)\n        return\n      } else if (typeof child.props.strategy === 'undefined') {\n        scriptLoaderItems.push({ ...child.props, strategy: 'afterInteractive' })\n        return\n      }\n    }\n  })\n\n  __NEXT_DATA__.scriptLoader = scriptLoaderItems\n}\n\nexport class NextScript extends React.Component<OriginProps> {\n  static contextType = HtmlContext\n\n  context!: HtmlProps\n\n  getDynamicChunks(files: DocumentFiles) {\n    return getDynamicChunks(this.context, this.props, files)\n  }\n\n  getPreNextScripts() {\n    return getPreNextScripts(this.context, this.props)\n  }\n\n  getScripts(files: DocumentFiles) {\n    return getScripts(this.context, this.props, files)\n  }\n\n  getPolyfillScripts() {\n    return getPolyfillScripts(this.context, this.props)\n  }\n\n  static getInlineScriptSource(context: Readonly<HtmlProps>): string {\n    const { __NEXT_DATA__, largePageDataBytes } = context\n    try {\n      const data = JSON.stringify(__NEXT_DATA__)\n\n      if (largePageDataWarnings.has(__NEXT_DATA__.page)) {\n        return htmlEscapeJsonString(data)\n      }\n\n      const bytes =\n        process.env.NEXT_RUNTIME === 'edge'\n          ? new TextEncoder().encode(data).buffer.byteLength\n          : Buffer.from(data).byteLength\n      const prettyBytes = require('../lib/pretty-bytes').default\n\n      if (largePageDataBytes && bytes > largePageDataBytes) {\n        if (process.env.NODE_ENV === 'production') {\n          largePageDataWarnings.add(__NEXT_DATA__.page)\n        }\n\n        console.warn(\n          `Warning: data for page \"${__NEXT_DATA__.page}\"${\n            __NEXT_DATA__.page === context.dangerousAsPath\n              ? ''\n              : ` (path \"${context.dangerousAsPath}\")`\n          } is ${prettyBytes(\n            bytes\n          )} which exceeds the threshold of ${prettyBytes(\n            largePageDataBytes\n          )}, this amount of data can reduce performance.\\nSee more info here: https://nextjs.org/docs/messages/large-page-data`\n        )\n      }\n\n      return htmlEscapeJsonString(data)\n    } catch (err) {\n      if (isError(err) && err.message.indexOf('circular structure') !== -1) {\n        throw new Error(\n          `Circular structure in \"getInitialProps\" result of page \"${__NEXT_DATA__.page}\". https://nextjs.org/docs/messages/circular-structure`\n        )\n      }\n      throw err\n    }\n  }\n\n  render() {\n    const {\n      assetPrefix,\n      inAmpMode,\n      buildManifest,\n      unstable_runtimeJS,\n      docComponentsRendered,\n      assetQueryString,\n      disableOptimizedLoading,\n      crossOrigin,\n    } = this.context\n    const disableRuntimeJS = unstable_runtimeJS === false\n\n    docComponentsRendered.NextScript = true\n\n    if (process.env.NEXT_RUNTIME !== 'edge' && inAmpMode) {\n      if (process.env.NODE_ENV === 'production') {\n        return null\n      }\n      const ampDevFiles = [\n        ...buildManifest.devFiles,\n        ...buildManifest.polyfillFiles,\n        ...buildManifest.ampDevFiles,\n      ]\n\n      return (\n        <>\n          {disableRuntimeJS ? null : (\n            <script\n              id=\"__NEXT_DATA__\"\n              type=\"application/json\"\n              nonce={this.props.nonce}\n              crossOrigin={this.props.crossOrigin || crossOrigin}\n              dangerouslySetInnerHTML={{\n                __html: NextScript.getInlineScriptSource(this.context),\n              }}\n              data-ampdevmode\n            />\n          )}\n          {ampDevFiles.map((file) => (\n            <script\n              key={file}\n              src={`${assetPrefix}/_next/${encodeURIPath(\n                file\n              )}${assetQueryString}`}\n              nonce={this.props.nonce}\n              crossOrigin={this.props.crossOrigin || crossOrigin}\n              data-ampdevmode\n            />\n          ))}\n        </>\n      )\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.props.crossOrigin)\n        console.warn(\n          'Warning: `NextScript` attribute `crossOrigin` is deprecated. https://nextjs.org/docs/messages/doc-crossorigin-deprecated'\n        )\n    }\n\n    const files: DocumentFiles = getDocumentFiles(\n      this.context.buildManifest,\n      this.context.__NEXT_DATA__.page,\n      process.env.NEXT_RUNTIME !== 'edge' && inAmpMode\n    )\n\n    return (\n      <>\n        {!disableRuntimeJS && buildManifest.devFiles\n          ? buildManifest.devFiles.map((file: string) => (\n              <script\n                key={file}\n                src={`${assetPrefix}/_next/${encodeURIPath(\n                  file\n                )}${assetQueryString}`}\n                nonce={this.props.nonce}\n                crossOrigin={this.props.crossOrigin || crossOrigin}\n              />\n            ))\n          : null}\n        {disableRuntimeJS ? null : (\n          <script\n            id=\"__NEXT_DATA__\"\n            type=\"application/json\"\n            nonce={this.props.nonce}\n            crossOrigin={this.props.crossOrigin || crossOrigin}\n            dangerouslySetInnerHTML={{\n              __html: NextScript.getInlineScriptSource(this.context),\n            }}\n          />\n        )}\n        {disableOptimizedLoading &&\n          !disableRuntimeJS &&\n          this.getPolyfillScripts()}\n        {disableOptimizedLoading &&\n          !disableRuntimeJS &&\n          this.getPreNextScripts()}\n        {disableOptimizedLoading &&\n          !disableRuntimeJS &&\n          this.getDynamicChunks(files)}\n        {disableOptimizedLoading && !disableRuntimeJS && this.getScripts(files)}\n      </>\n    )\n  }\n}\n\nexport function Html(\n  props: React.DetailedHTMLProps<\n    React.HtmlHTMLAttributes<HTMLHtmlElement>,\n    HTMLHtmlElement\n  >\n) {\n  const {\n    inAmpMode,\n    docComponentsRendered,\n    locale,\n    scriptLoader,\n    __NEXT_DATA__,\n  } = useHtmlContext()\n\n  docComponentsRendered.Html = true\n  handleDocumentScriptLoaderItems(scriptLoader, __NEXT_DATA__, props)\n\n  return (\n    <html\n      {...props}\n      lang={props.lang || locale || undefined}\n      amp={process.env.NEXT_RUNTIME !== 'edge' && inAmpMode ? '' : undefined}\n      data-ampdevmode={\n        process.env.NEXT_RUNTIME !== 'edge' &&\n        inAmpMode &&\n        process.env.NODE_ENV !== 'production'\n          ? ''\n          : undefined\n      }\n    />\n  )\n}\n\nexport function Main() {\n  const { docComponentsRendered } = useHtmlContext()\n  docComponentsRendered.Main = true\n  // @ts-ignore\n  return <next-js-internal-body-render-target />\n}\n\n/**\n * `Document` component handles the initial `document` markup and renders only on the server side.\n * Commonly used for implementing server side rendering for `css-in-js` libraries.\n */\nexport default class Document<P = {}> extends React.Component<\n  DocumentProps & P\n> {\n  /**\n   * `getInitialProps` hook returns the context object with the addition of `renderPage`.\n   * `renderPage` callback executes `React` rendering logic synchronously to support server-rendering wrappers\n   */\n  static getInitialProps(ctx: DocumentContext): Promise<DocumentInitialProps> {\n    return ctx.defaultGetInitialProps(ctx)\n  }\n\n  render() {\n    return (\n      <Html>\n        <Head />\n        <body>\n          <Main />\n          <NextScript />\n        </body>\n      </Html>\n    )\n  }\n}\n\n// Add a special property to the built-in `Document` component so later we can\n// identify if a user customized `Document` is used or not.\nconst InternalFunctionDocument: DocumentType =\n  function InternalFunctionDocument() {\n    return (\n      <Html>\n        <Head />\n        <body>\n          <Main />\n          <NextScript />\n        </body>\n      </Html>\n    )\n  }\n;(Document as any)[NEXT_BUILTIN_DOCUMENT] = InternalFunctionDocument\n"],"names":["React","OPTIMIZED_FONT_PROVIDERS","NEXT_BUILTIN_DOCUMENT","getPageFiles","htmlEscapeJsonString","isError","HtmlContext","useHtmlContext","encodeURIPath","largePageDataWarnings","Set","getDocumentFiles","buildManifest","pathname","inAmpMode","sharedFiles","pageFiles","process","env","NEXT_RUNTIME","allFiles","getPolyfillScripts","context","props","assetPrefix","assetQueryString","disableOptimizedLoading","crossOrigin","polyfillFiles","filter","polyfill","endsWith","map","script","defer","nonce","noModule","src","hasComponentProps","child","AmpStyles","styles","curStyles","Array","isArray","children","hasStyles","el","dangerouslySetInnerHTML","__html","forEach","push","style","amp-custom","join","replace","getDynamicChunks","files","dynamicImports","isDevelopment","file","includes","async","getScripts","normalScripts","lowPriorityScripts","lowPriorityFiles","getPreNextWorkerScripts","scriptLoader","nextScriptWorkers","partytownSnippet","__non_webpack_require__","userDefinedConfig","find","length","data-partytown-config","data-partytown","worker","index","strategy","scriptChildren","scriptProps","srcProps","Error","type","key","data-nscript","err","code","console","warn","message","getPreNextScripts","webWorkerScripts","beforeInteractiveScripts","beforeInteractive","getHeadHTMLProps","restProps","headProps","getAmpPath","ampPath","asPath","getNextFontLinkTags","nextFontManifest","dangerousAsPath","preconnect","preload","appFontsEntry","pages","pageFontsEntry","preloadedFontFiles","from","preconnectToSelf","link","data-next-font","pagesUsingSizeAdjust","rel","href","fontFile","ext","exec","as","Head","Component","contextType","getCssLinks","optimizeCss","optimizeFonts","cssFiles","f","unmangedFiles","dynamicCssFiles","existing","has","cssLinkElements","isSharedFile","isUnmanagedFile","data-n-g","undefined","data-n-p","NODE_ENV","makeStylesheetInert","getPreloadDynamicChunks","Boolean","getPreloadMainLinks","preloadFiles","getBeforeInteractiveInlineScripts","html","id","__NEXT_CROSS_ORIGIN","node","Children","c","some","url","startsWith","newProps","cloneElement","render","hybridAmp","canonicalBase","__NEXT_DATA__","headTags","unstable_runtimeJS","unstable_JsPreload","disableRuntimeJS","disableJsPreload","docComponentsRendered","head","cssPreloads","otherHeadElements","strictNextHead","concat","toArray","isReactHelmet","name","hasAmphtmlRel","hasCanonicalRel","badProp","indexOf","Object","keys","prop","page","nextFontLinkTags","data-next-hide-fouc","data-ampdevmode","noscript","meta","content","count","toString","require","cleanAmpPath","amp-boilerplate","data-n-css","createElement","Fragment","handleDocumentScriptLoaderItems","scriptLoaderItems","headChildren","bodyChildren","combinedChildren","__nextScript","NextScript","getInlineScriptSource","largePageDataBytes","data","JSON","stringify","bytes","TextEncoder","encode","buffer","byteLength","Buffer","prettyBytes","default","add","ampDevFiles","devFiles","Html","locale","lang","amp","Main","next-js-internal-body-render-target","Document","getInitialProps","ctx","defaultGetInitialProps","body","InternalFunctionDocument"],"mappings":"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"}